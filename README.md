# shiny-colors-appeal-simulator

シャニマスのアピール値シミュレータです。
[シャニマス攻略 wiki：仕様考察](https://wikiwiki.jp/shinycolors/%E4%BB%95%E6%A7%98%E8%80%83%E5%AF%9F) （2020/09/20 23:44 時点）
に記載のアピール値の計算式に準拠しています。

## アピール値の計算仕様

### フェスのアピール値計算

```text
フェスアピール値 = INT(基礎係数 * アピール倍率) * Excellent係数
基礎係数 = INT(フェスアピール基礎値 * (1 + 該当属性バフ合計値(%)/100) * アピール係数)
フェスアピール基礎値 = 2.0 * アピールするアイドルの該当ステータス + 0.5 * (アピールしないアイドルの該当ステータス)
※INT(X) は小数点以下切捨てを指す
```

- 該当ステータスはフェスユニット編成で表示されているユニットボーナスを含めたものを使用する
- バフ合計値はそのターンに発動したパッシブスキルと効果情報に表示されている該当属性のバフ・デバフ、
  および G.R.A.D.のアビリティで付与されたアピール値アップの効果をすべて加算したもの

  - G.R.A.D.のアビリティによる効果は Vo/Da/Vi.の全ての属性 が対象
  - 例えば、アイドルの絆が１つ有効になっている場合は全属性に常に+5%される

- アピール係数はアピールを行った場合の係数。 Perfect=1.5 / Good=1.1 / Normal=1.0 / Bad=0.5
- アピール倍率はスキルに表示されているアピール倍数。 アピール Ⅳ なら 2.5。
- Excellent 係数はアピールと審査員が一致した場合は 2、一致しない場合は 1。

フェスユニット編成で表示されている Vo/Da/Vi の値は、それぞれ Vo/Da/Vi 担当のフェスアピール基礎値を示している。
が、表示上端数切り上げが行われているので、この値を使った場合は算出式が少しずれる。

### 思い出アピール値

思い出アピールは、

- Vocal&Dance&Visual 複合アピールを行う「本体」
- Vocal2 倍追撃やバフなどキャラごとの「追加効果」
- Link 状態であればさらに「Link 追撃」

この 3 つの要素で構成され、現在残っている全ての審査員に対してアピールを行う。

通常のアピールと比較して、以下のような違いがある。

- 「本体」アピールの倍率はセンターの思い出レベルによる「基礎倍率」と、センター以外の思い出レベルによる「編成補正」によって決まる
  - センターの思い出が Lv.5 の場合、「基礎倍率」は 2.0、Lv.4 なら 1.4、Lv.3 は 1.2、Lv.2 は 1.0、Lv.1 は 0.8 となる
  - 「編成補正」は各アイドルのごとに、思い出 Lv.5 = 0.075、Lv.4 = 0.05、Lv.3 = 0.03、Lv.2 = 0.02、Lv.1 =Lv.0 = 0 とし、これを 4 人分足したものになる（小数点以下第三位は表示上切り捨てられるが計算には用いられる。また、プロデュース時は 1.0 倍に固定）
  - カードのレアリティに依存しない
- ルーレットで Good の場合は Perfect 相当(=1.5)、Bad の場合は Bad 相当(=0.5)のアピールを行ったものとして数値を算出する

なお、通常のアピールに乱数がないことから、プレイヤーが行う思い出アピールにも同様に乱数は存在しない。

## 各種ステータス効果の重複

### プレイヤーのアピールに関係するもの

Vo,Da,Vi のステータス UP は、効果量を加算する。
興味 UP,興味 DOWN は、個別に乗算する。

## メンタルで威力の変わるライブスキル

### 背水系

`アピール倍率 = (-0.8*(メンタルの割合)+1)*最大値`

### 渾身系

```text
アピール倍率 = 最大値*(1.6*メンタルの割合-0.6)
※ただし 最大値*0.2 を下回らない。
```

## 興味 UP/DOWN に関する仕様

興味〇〇%UP / DOWN 効果が審査員に付与されている場合、アピールの計算式で求められた値に UP/DOWN の結果を乗じて最終結果を算出する。
複数の興味効果が付与されている場合、それぞれ個別に乗算する。
そのため、興味値 DOWN の合計が 100(%)以上になったとしても、アピール計算結果は 0 にはならない。

- 例 1: 興味 33%UP が付与されている場合 => アピール計算結果 \* 1.33
- 例 2: 興味 50%DOWN が付与されている => アピール計算結果 \* 0.5
- 例 3: 興味 50%DOWN が２個付与されている => アピール計算結果 \* 0.5 \* 0.5
